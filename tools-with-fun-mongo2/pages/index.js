import Head from 'next/head'; import Link from 'next/link'; import dbConnect from '../lib/db'; import Tool from '../models/Tool';
export default function Home({ tools }){
  const categories = {}; tools.forEach(t=>{ categories[t.category]=categories[t.category]||[]; categories[t.category].push(t) })
  return (<div><Head><title>Tools with Fun</title><meta name='description' content='Tools with Fun - online calculators and mini-games' /></Head><div className='header'><img src='/logo.svg' alt='logo' style={{height:44}}/><h1>Tools with Fun</h1></div><div className='container'><input className='search' placeholder='Search tools...' onChange={(e)=>{document.querySelectorAll('.card').forEach(c=>{ const t=c.querySelector('h3').innerText; c.style.display = t.toLowerCase().includes(e.target.value.toLowerCase())?'block':'none'})}} /><h2>Popular Tools</h2><div className='tools-grid'>{tools.map(t=>(<div className='card' key={t._id}><h3 className='tool-title'>{t.title}</h3><p className='tool-desc'>{t.description}</p><div dangerouslySetInnerHTML={{__html:t.html}} /></div>))}</div><div style={{marginTop:20}}><Link href='/admin/login'><a className='btn'>Admin</a></Link></div><div className='footer'>Â© Tools with Fun</div></div></div>)
}
export async function getServerSideProps(){ await dbConnect(); const tools = await Tool.find({}).sort({createdAt:-1}).lean(); return { props:{ tools: JSON.parse(JSON.stringify(tools)) } } }
